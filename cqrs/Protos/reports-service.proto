syntax = "proto3";
import "common/report.proto";

option csharp_namespace = "ReportsMicroservice";

package ReportsMicroservice;

service Reports {
  rpc GenerateUserActivityReport (GenerateUserActivityReportRequest) returns (GenerateReportResponse);
  rpc GenerateOverallReport (GenerateOverallReportRequest) returns (GenerateReportResponse);
}

message GenerateUserActivityReportRequest {
  int64 flowId = 1;
  string userId = 2;
  int64 timestampFrom = 3;
  int64 timestampTo = 4;
  Granularity granularity = 5;
}

message GenerateOverallReportRequest {
  int64 flowId = 1;
  repeated Aggregation aggregations = 2;
  int64 timestampFrom = 3;
  int64 timestampTo = 4;
  Granularity granularity = 5;
  ReportSubject subject = 6;
}

message GenerateReportResponse {
  int64 flowId = 1;
  Report report = 2;
}